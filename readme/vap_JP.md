<h1>
<p align="center">
ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¤ã‚­ãƒ³ã‚° (VAP) ãƒ¢ãƒ‡ãƒ«
</p>
</h1>
<p align="center">
README: <a href="vap.md">English </a> | <a href="vap_JP.md">Japanese (æ—¥æœ¬èª) </a>
</p>

`Maai` ã‚¯ãƒ©ã‚¹ã® `mode` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ `vap` ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚

å…¥åŠ›ã¯2ãƒãƒ£ãƒ³ãƒãƒ«ã®16kHzéŸ³å£°ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™ã€‚
å‡ºåŠ›ã¯2ã¤ã‚ã‚Šã€`p_now` ã¯2è©±è€…é–“ã®éŸ³å£°æ´»å‹•ãŒæ¬¡ã®0ï½600ãƒŸãƒªç§’ã§ç™ºç”Ÿã™ã‚‹ç¢ºç‡ã€`p_future` ã¯600ï½2000ãƒŸãƒªç§’å…ˆã®ç¢ºç‡ã‚’è¡¨ã—ã¾ã™ã€‚
ä¸€èˆ¬çš„ãªã‚¿ãƒ¼ãƒ³ãƒ†ã‚¤ã‚­ãƒ³ã‚°ç”¨é€”ã§ã¯ `p_now` ã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
ã©ã¡ã‚‰ã®å‡ºåŠ›ã‚‚è¾æ›¸å‹ã§è¿”ã•ã‚Œã¾ã™ã€‚

</br>

## å¯¾å¿œè¨€èª

ä»¥ä¸‹ã®è¨€èªã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
`Maai` ã‚¯ãƒ©ã‚¹ã® `lang` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

### æ—¥æœ¬èªï¼ˆ`lang=jp`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®æ—¥æœ¬èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- [æ—…è¡Œä»£ç†åº—ã‚¿ã‚¹ã‚¯å¯¾è©±ã‚³ãƒ¼ãƒ‘ã‚¹](https://aclanthology.org/2022.lrec-1.619/)
- [ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ­ãƒœãƒƒãƒˆå¯¾è©±ã‚³ãƒ¼ãƒ‘ã‚¹](https://aclanthology.org/2025.naacl-long.367/)
- [ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ](https://www.arxiv.org/abs/2506.21191)

</br>

### æ—¥æœ¬èªMITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆ`lang=jp_kyoto`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®æ—¥æœ¬èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- [ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ](https://www.arxiv.org/abs/2506.21191)

ã¾ãŸã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯MITãƒ©ãƒ³ã‚»ãƒ³ã‚¹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

</br>

### è‹±èªï¼ˆ`lang=en`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®è‹±èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- [Switchboard corpus](https://catalog.ldc.upenn.edu/LDC97S62)
- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

</br>

### è‹±èªMITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆ`lang=en_kyoto`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®è‹±èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

ã¾ãŸã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯MITãƒ©ãƒ³ã‚»ãƒ³ã‚¹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

</br>

### ä¸­å›½èªï¼ˆ`lang=ch`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®ä¸­å›½èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- [HKUST Mandarin Telephone Speech](https://catalog.ldc.upenn.edu/LDC2005S15)
- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

</br>

### ä¸­å›½èªMITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆ`lang=ch_kyoto`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®ä¸­å›½èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

ã¾ãŸã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯MITãƒ©ãƒ³ã‚»ãƒ³ã‚¹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

</br>

### 3è¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªï¼‹è‹±èªï¼‹ä¸­å›½èªï¼‰ï¼ˆ`lang=tri`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®3è¨€èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- [Switchboard corpus](https://catalog.ldc.upenn.edu/LDC97S62)
- [HKUST Mandarin Telephone Speech](https://catalog.ldc.upenn.edu/LDC2005S15)
- [æ—…è¡Œä»£ç†åº—ã‚¿ã‚¹ã‚¯å¯¾è©±ã‚³ãƒ¼ãƒ‘ã‚¹](https://aclanthology.org/2022.lrec-1.619/)
- [ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ­ãƒœãƒƒãƒˆå¯¾è©±ã‚³ãƒ¼ãƒ‘ã‚¹](https://aclanthology.org/2025.naacl-long.367/)
- [ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ](https://www.arxiv.org/abs/2506.21191)

</br>

### 3è¨€èªå¯¾å¿œMITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆæ—¥æœ¬èªï¼‹è‹±èªï¼‹ä¸­å›½èªï¼‰ï¼ˆ`lang=tri_kyoto`ï¼‰

æœ¬ãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®3è¨€èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ï¼š
- [ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ](https://www.arxiv.org/abs/2506.21191)

ã¾ãŸã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯MITãƒ©ãƒ³ã‚»ãƒ³ã‚¹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

</br>

## å®Ÿè£…ä¾‹

```python
from maai import Maai, MaaiInput

wav1 = MaaiInput.Wav(wav_file_path="path_to_your_user_wav_file")
wav2 = MaaiInput.Wav(wav_file_path="path_to_your_system_wav_file")

maai = Maai(mode="vap", lang="jp", frame_rate=10, audio_ch1=wav1, audio_ch2=wav2, device="cpu")

maai.start()

while True:
    result = maai.get_result()

    print(result['p_now'])
    print(result['p_future'])
```

</br>

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

åˆ©ç”¨å¯èƒ½ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã«ã¾ã¨ã‚ã¾ã™ã€‚
`frame_rate` ã¯VAPãƒ¢ãƒ‡ãƒ«ãŒ1ç§’ã‚ãŸã‚Šã«å‡¦ç†ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ã”åˆ©ç”¨ã®è¨ˆç®—ç’°å¢ƒã«åˆã‚ã›ã¦ã€ã“ã®å€¤ã‚’èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

| `lang` | `frame_rate` |
| --- | --- |
| jp | 5, 10, 20 |
| jp_kyoto | 5, 10, 20 |
| en | 5, 10, 20 |
| en_kyoto | 5, 10, 20 |
| ch | 5, 10, 20 |
| ch_kyoto | 5, 10, 20 |
| tri | 5, 10, 20 |
| tri_kyoto | 5, 10, 20 |

<br>

## ğŸ“š è«–æ–‡ãƒ»å‚è€ƒæ–‡çŒ®

ã“ã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã—ãŸæˆæœã‚’ç™ºè¡¨ã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã®è«–æ–‡ã‚’å¼•ç”¨ã—ã¦ãã ã•ã„ã€‚ğŸ™

Koji Inoue, Bing'er Jiang, Erik Ekstedt, Tatsuya Kawahara, Gabriel Skantze<br>
__Real-time and Continuous Turn-taking Prediction Using Voice Activity Projection__<br>
International Workshop on Spoken Dialogue Systems Technology (IWSDS), 2024<br>
https://arxiv.org/abs/2401.04868<br>

```
@inproceedings{inoue2024iwsds,
    author = {Koji Inoue and Bing'er Jiang and Erik Ekstedt and Tatsuya Kawahara and Gabriel Skantze},
    title = {Real-time and Continuous Turn-taking Prediction Using Voice Activity Projection},
    booktitle = {International Workshop on Spoken Dialogue Systems Technology (IWSDS)},
    year = {2024},
    url = {https://arxiv.org/abs/2401.04868},
}
```

ãƒˆãƒªãƒªãƒ³ã‚¬ãƒ«VAPãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã‚‚å¼•ç”¨ã—ã¦ãã ã•ã„ã€‚

Koji Inoue, Bing'er Jiang, Erik Ekstedt, Tatsuya Kawahara, Gabriel Skantze<br>
__Multilingual Turn-taking Prediction Using Voice Activity Projection__<br>
Joint International Conference on Computational Linguistics, Language Resources and Evaluation (LREC-COLING), pages 11873-11883, 2024<br>
https://aclanthology.org/2024.lrec-main.1036/<br>

```
@inproceedings{inoue2024lreccoling,
    author = {Koji Inoue and Bing'er Jiang and Erik Ekstedt and Tatsuya Kawahara and Gabriel Skantze},
    title = {Multilingual Turn-taking Prediction Using Voice Activity Projection},
    booktitle = {Proceedings of the Joint International Conference on Computational Linguistics and Language Resources and Evaluation (LREC-COLING)},
    pages = {11873--11883},
    year = {2024},
    url = {https://aclanthology.org/2024.lrec-main.1036/},
}
```
